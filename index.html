<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Peegel Uurija</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #020617; color: #e2e8f0; font-family: sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.5); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .progress-bg { background: #0f172a; border-radius: 99px; overflow: hidden; height: 8px; }
        #blackout { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:9999; flex-direction:column; align-items:center; justify-content:center; }
    </style>
</head>
<body class="p-4 min-h-screen flex flex-col">

    <div id="blackout" onclick="unlockScreen()">
        <div id="clock" class="text-slate-900 text-5xl font-bold">00:00</div>
        <div class="text-slate-950 mt-4 text-[10px]">PUUDUTA AVAMISEKS</div>
    </div>

    <div class="flex justify-between items-center mb-8">
        <h1 class="text-2xl font-light tracking-widest uppercase">Peegel</h1>
        <div class="text-right">
            <div id="status-dot" class="inline-block w-2 h-2 rounded-full bg-slate-800"></div>
            <p class="text-[9px] text-slate-500 uppercase tracking-tighter">S체steem Aktiivne</p>
        </div>
    </div>

    <div class="space-y-6 flex-1">
        
        <div class="glass rounded-[40px] p-8 text-center">
            <div id="sound-type" class="text-xs uppercase tracking-[0.3em] text-slate-500 mb-2">Ootel</div>
            <div id="hz-val" class="text-5xl font-light mb-2">0 <span class="text-xl opacity-30">Hz</span></div>
            <div id="avg-hz-live" class="text-[10px] text-blue-500 font-bold uppercase">Keskmine: 0 Hz</div>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div class="glass rounded-[30px] p-6 text-center">
                <p class="text-[9px] uppercase text-slate-500 mb-1">K천ne aeg</p>
                <span id="s-val" class="text-2xl font-mono">0s</span>
            </div>
            <div class="glass rounded-[30px] p-6 text-center">
                <p class="text-[9px] uppercase text-slate-500 mb-1">Vaikuse aeg</p>
                <span id="v-val" class="text-2xl font-mono text-slate-400">0s</span>
            </div>
        </div>

        <div class="glass rounded-[30px] p-6">
            <div class="flex justify-between text-[10px] uppercase mb-3 px-1">
                <span>90 min Puhver</span>
                <span id="buffer-text">0 / 90 min</span>
            </div>
            <div class="progress-bg">
                <div id="buffer-bar" class="h-full bg-blue-600 w-0 transition-all duration-1000"></div>
            </div>
        </div>

        <div class="glass rounded-[30px] p-6 min-h-[100px]">
            <p id="live-transcript" class="text-sm italic text-slate-400 leading-relaxed">...</p>
        </div>

        <div id="controls" class="space-y-3">
            <button id="startBtn" class="w-full bg-white text-black p-6 rounded-[30px] font-bold uppercase tracking-widest active:scale-95 transition-all">Alusta</button>
            
            <div id="activeControls" class="hidden space-y-3">
                <button id="fixBtn" class="w-full bg-blue-600 text-white p-6 rounded-[30px] font-bold uppercase tracking-widest active:scale-95 transition-all">M채rgi aeg (Fix)</button>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="lockScreen()" class="bg-slate-800 text-slate-400 p-4 rounded-[25px] text-xs font-bold uppercase">Lukk</button>
                    <button id="stopBtn" class="bg-red-900/20 text-red-500 p-4 rounded-[25px] text-xs font-bold uppercase">L천peta</button>
                </div>
            </div>
        </div>
    </div>

    <div id="history-list" class="mt-10 space-y-4 pb-10"></div>

    <script src="script.js"></script>
</body>
</html>
